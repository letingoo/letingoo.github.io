---
layout: post
title: 2018-07-27 MySql锁
---



从锁的粒度MySql分为行锁、表锁和页锁。 表锁的开销小，但是粒度大，并发冲突的概率大。行锁则相反
MyISAM引擎只支持表锁，InnoDB则可以支持行锁和页锁。而InnoDB在做行锁的时候，锁住的是索引中的索引项，因此不走索引的话InnoDB执行的是表锁。
并且如果两条记录对应同一个索引项，是会冲突的。

对于UPDATE、DELETE和INSERT语句，InnoDB会自动给涉及数据集加排他锁

对于普通SELECT语句，InnoDB不会加任何锁；当然我们也可以显示的加锁：
共享锁：select * from tableName where ... + lock in share more
排他锁：select * from tableName where ... + for update
